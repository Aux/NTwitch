language: csharp
git:
  depth: 1
branches:
  only:
  - master
  - dev
matrix:
  include:
  - os: linux
    dist: trusty
    sudo: required
    mono: none
    dotnet: 1.0.0-rc4-004527
    env: DOTNETCORE=1
script:
  - dotnet restore
  - dotnet build src/NTwitch/NTwitch.csproj --configuration Release --version-suffix beta-$TRAVIS_BUILDNUMBER
  - dotnet build src/NTwitch.Core/NTwitch.Core.csproj --configuration Release --version-suffix beta-$TRAVIS_BUILDNUMBER
  - dotnet build src/NTwitch.Rest/NTwitch.Rest.csproj --configuration Release --version-suffix beta-$TRAVIS_BUILDNUMBER
  - dotnet build src/NTwitch.Chat/NTwitch.Chat.csproj --configuration Release --version-suffix beta-$TRAVIS_BUILDNUMBER
#  - "$TRAVIS_BRANCH" == "master" && dotnet build */**/project.json --configuration Release
#  - "$TRAVIS_BRANCH" == "dev" && dotnet build */**/project.json --configuration Release --version-suffix beta-$TRAVIS_BUILDNUMBER
#deploy:
#  provider: script
#  skip_cleanup: true
#  script:
#    - cd NTwitch && nuget push *.nupkg $NUGET_KEY -verbosity detailed
